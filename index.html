<!DOCTYPE html>
<html>
<?php
header('Access-Control-Allow-Origins: *');
?>

<title>Reel Ratings</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<style>
body,h1,h2{font-family: "Raleway", sans-serif}
body, html {height: 100%}
p {line-height: 2}
.bgimg, .bgimg2 {
    min-height: 100%;
    background-position: center;
    background-size: cover;
}
.bgimg {background-image: url("images/test.jpg")}
.bgimg2 {background-image: url("images/chairs.jpg")}

input {
	width:100%
	text-align: center
}
</style>
<body>

<!-- Header / Home-->
<header class="w3-display-container w3-wide bgimg2 w3-grayscale-min" id="home">
  <div class="w3-display-middle w3-text-white w3-center">
    <h1 class="w3-jumbo">Reel Ratings</h1></br>
    <h2 id="output">Your Movie Rating Awaits</h2></br>
    <input id="input" 
		type="text" 
		size="50"
		onfocus="focusFuntion()"
		value="Enter a movie Title" 
		class="w3-white w3-round w3-padding-large w3-large">
	<p class="w3-center"><a onclick="getRating()" class="w3-button w3-black w3-round w3-padding-large w3-large">Get Rating</a></p>
  </div>
</header>

<!-- Navbar (sticky bottom) -->
<div class="w3-bottom w3-hide-small">
  <div class="w3-bar w3-white w3-center w3-padding w3-opacity-min w3-hover-opacity-off">
    <a href="#home" style="width:25%" class="w3-bar-item w3-button">Home</a>
    <a href="#us" style="width:25%" class="w3-bar-item w3-button">About us</a>
    <a href="https://github.com/UCSB-dataScience-ProjectGroup/movie_rating_prediction" style="width:25%" class="w3-bar-item w3-button">GitHub: Reel Ratings</a>
    <a href="https://github.com/UCSB-dataScience-ProjectGroup" style="width:25%" class="w3-bar-item w3-button w3-hover-black">UCSB Data Science</a>
  </div>
</div>

<!-- About / US -->
<div class="w3-container w3-padding-64 w3-khaki w3-grayscale-min" id="us">
  <div class="w3-content">
    <h1 class="w3-center w3-text-grey"><b>Reel Ratings Team</b></h1>
    <img class="w3-round" src="images/ReelTeam.jpg" style="width:100%;margin:32px 0">
    <p><i>Contributors:</br>
			<s>Danielle Robinson</s> Andrew Polk</br>
			<s>Victoria Sneddon</s> Andrew Polk (Project Manager)</br>
			<s>Brandon Tran</s> Andrew Polk</br>
			<s>Jake Hickey</s> Andrew Polk</br>
			<s>Ari Gilmore</s> Andrew Polk</br>
			Andrew Polk</br>
			<s>Ivy Tran</s> Andrew Polk</br></br>

			We wanted to be able to predict the rating of a movie before it is released. We wanted to be able to input a movie or upcoming movie title and output the predicted movie rating.</i>
    </p><br>
    <p class="w3-center"><a href="https://github.com/UCSB-dataScience-ProjectGroup/movie_rating_prediction" class="w3-button w3-black w3-round w3-padding-large w3-large">Details</a></p>
  </div>
</div>

<!-- Footer -->
<footer class="w3-center w3-black w3-padding-16">
  <p>Powered by <a href="https://github.com/UCSB-dataScience-ProjectGroup/movie_rating_prediction" title="ReelRatings" target="_blank" class="w3-hover-text-green">ReelRatings</a></p>
</footer>
<div class="w3-hide-small" style="margin-bottom:32px"> </div>

<script>
	function focusFuntion() {
		document.getElementById("input").value = "";
		document.getElementById("input").style="w3-text-black";
	}

	window.onload = function() {
		var iframe = document.createElement('iframe');
		iframe.id = 'iframe';
		iframe.style.display = 'none';
		iframe.src = 'ngrokTunnel.txt';
		document.body.appendChild(iframe)
	}

	function getRating() {
		var xhr = new XMLHttpRequest();
		var input = document.getElementById("input").value;
		document.getElementById("input").value = "Enter another movie Title";
		document.getElementById("input").style="w3-text-light-grey";
		
		var tunnel = document.getElementById('iframe').contentDocument.body.firstChild.innerHTML;
		xhr.open('GET', host=tunnel+"/find/"+input, true);
		xhr.setRequestHeader("Access-Control-Allow-Origins", "*")
		xhr.withCredentials = true;

		document.getElementById("output").innerHTML="Computing...";

		
		xhr.onreadystatechange = function() {
			if(this.readyState == 4 && this.status == 200) {
				var text = this.responseText.split(",");
				document.getElementById("output").innerHTML=("<b>"+text[0]+"</b> gets a <b>"+text[1]+"/10</b>");
			}
			else if(this.status == 404) {
				document.getElementById("output").innerHTML="Could not find movie: "+input;
			}
		};
		
		xhr.send();
	}
</script>

</body>
</html>
